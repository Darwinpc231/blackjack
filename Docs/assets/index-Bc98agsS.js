(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function p(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=p(t);fetch(t.href,r)}})();(()=>{let d=[];const c=["♠","♥","♦","♣"],p=["A","J","Q","K"];let a=0,t=0;const r=document.querySelector("#btnPedir"),s=document.querySelector("#btnDetener"),q=document.querySelector("#btnNuevo"),g=document.querySelector("#jugador-cartas"),y=document.querySelector("#computadora-cartas"),b=document.querySelector("#puntosJugador"),h=document.querySelector("#puntosComputadora"),m=document.querySelector("#mensaje"),E=e=>{const o=[...e];for(let n=o.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[o[n],o[i]]=[o[i],o[n]]}return o},v=(e=2)=>{d=N(),a=0,t=0,b.textContent=0,h.textContent=0,g.innerHTML="",y.innerHTML="",r.disabled=!1,s.disabled=!1,console.log("Juego inicializado correctamente")},N=()=>{const e=[];for(let o=2;o<=10;o++)for(let n of c)e.push(o+n);for(let o of c)for(let n of p)e.push(n+o);return E(e)},C=()=>{if(d.length===0)throw"No hay cartas en el deck";return d.pop()},L=e=>{const o=e.substring(0,e.length-1);return isNaN(o)?o==="A"?11:10:parseInt(o)},T={"♠":"S","♥":"H","♦":"D","♣":"C"},S=e=>{const o=e.substring(0,e.length-1),n=e[e.length-1],i=T[n],J=`${o}${i}.png`,u=document.createElement("img");return u.src=`assets/cartas/${J}`,u.classList.add("carta"),u.alt=e,u},l=(e,o=3e3)=>{m.textContent=e,m.style.display="block",setTimeout(()=>{m.style.display="none"},o)},f=e=>{let o=setInterval(()=>{const n=C();t+=L(n),h.textContent=t;const i=S(n);y.appendChild(i),(t>=e||t>=21)&&(clearInterval(o),setTimeout(()=>{t===e?l("🤝 ¡Empate! Nadie gana"):e>21?l("🤖 ¡La computadora gana! Te pasaste de 21"):t>21?l("🎉 ¡Ganaste! La computadora se pasó de 21"):t>e?l("🤖 ¡La computadora gana! Tiene mayor puntaje"):l("🎉 ¡Ganaste! Tienes mayor puntaje")},100))},800)};r.addEventListener("click",()=>{const e=C();a+=L(e),b.textContent=a;const o=S(e);g.appendChild(o),a>21?(console.warn("Lo siento mucho, perdiste"),r.disabled=!0,s.disabled=!0,f(a)):a===21&&(console.warn("21, genial!"),l("🎯 ¡21! ¡Perfecto!",1e3),r.disabled=!0,s.disabled=!0,f(a))}),s.addEventListener("click",()=>{r.disabled=!0,s.disabled=!0,f(a)}),q.addEventListener("click",()=>{console.clear(),v()}),v()})();
